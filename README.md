# NYPC 코드배틀 예선 후기

**[문제 규칙 및 링크](https://nypc.github.io/2025-codebattle/online_1)**


 NYPC CodeBattle의 예선이 종료되었다. 내가 생각한 전략과 코드를 남기는 것이 좋다고 생각해서 github에 올리게 되었다.   
 이 문제는 문제설명 영상에서 말했듯이 Yacht Dice라는 게임을 살짝 변형한 게임이다. 이 게임에서 최적 전략을 위한 방법은 각 경우의 수를 그래프로 나타내서 각 그래프에 있는 정점마다 기댓값을 구해서 가장 기댓값이 높은 것을 선택하는 것이다. 

 이 Yacht Auction이라는 게임은 이전의 선택이 이후의 결과에 영향을 미치기 때문에 각 카테고리가 사용되었는지에 대한 2^12상태와 63000점 이상을 얻은 경우 보너스 점수 35000점을 추가로 얻게 되니 그에 대한 상단 카테고리 점수0~63까지 저장하는(상단 점수를 /1000한 값) 64가지 상태(63점 초과는 63점으로 저장)과 이전 round에서 넘어온 주사위 5개의 조합 ![Image](https://github.com/user-attachments/assets/7c625e1d-32c5-4e31-900b-4c06e4419eef)이니 2^12*64*252를 하면 총 66060288개라는 상태가 나온다.

 단순히 저렇게 보면 상태가 많아 보이지만 도달 불가능한 상태까지 고려하면 상태의 수를 상당히 줄일 수 있다. 예를 들어 상단 카테고리로 One과 Two만 사용되었다면 63점이라는 값이 나올 수가 없으므로 위와 같은 경우의 상태를 제거할 수 있다. 따라서 도달할 수 있는 상태를 구하는 코드를 짜서 계산해 본 결과 총 4096개의 경우 중 2794개의 상태만이 도달 가능해서 대략 31%를 절감할 수 있다. 
 또한 0부터 63까지 값을 저장하는 이유가 35000점이라는 추가 점수를 위해서이니 더 이상 63이 될 수 없는 상태를 추가로 제외하면 더 많은 상태를 절감할 수 있다. 예를 들어 상단 6개 카테고리를 다 선택한 경우 0부터 63까지의 값이 모두 가능하지만 이미 다 선택을 하였기에 더 이상 35000점이라는 추가 점수를 기대할 수 가 없어 0부터 63이라는 각각의 점수를 저장할 필요가 없이 그냥 0이라는 값으로만 저장해도 아무런 문제가 없다. 마찬가지로 two, three, six를 선택하였다고 가정하였을 때 선택하지 않은 나머지인 one, four, five를 모두 선택한다고 해도 최대 50점만 가능하기 때문에 two, three, six에서 도달 가능한 값인 0 2 3 4 5 6 7 8 9 10 11 12이라는 값은 63점 이상이 되어서 추가 점수를 획득할 수 없으니 모두 다 0이라고 가정하여도 별 문제가 없다. 

 각 상태의 기댓값을 구하는 방법은 10개의 주사위 조합에서 선택한 5개의 주사위와 아직 사용되지 않은 카테고리에 대해 점수를 기록한 후 얻는 점수와 다음 상태의 기대값을 더한 값들 중에서 최댓값을 구한 후 주사위 5개를 굴려 나온 결과에 대해 구한 기댓값의 가중평균을 취하면 된다. 
 위와 같은 방식으로 각각의 상태값을 구하는 코드를 짜서 모든 상태의 개댓값을 구하는대에 대략 1시간 반정도가 걸렸다.  
