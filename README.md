# NYPC 코드배틀 예선 후기

**[문제 규칙 및 링크](https://nypc.github.io/2025-codebattle/online_1)**


## 🎮 문제 소개
NYPC CodeBattle의 예선이 종료되었다.  
내가 생각한 전략과 코드를 남기는 것이 좋다고 판단하여 GitHub에 업로드하게 되었다.  

이 문제는 **Yacht Dice**라는 게임을 변형한 것이다.  
최적 전략을 찾는 방법은 각 경우의 수를 그래프로 나타내고, 그래프에 있는 정점마다 기대값을 구해서 가장 높은 것을 선택하는 것이다.

---

## 🧮 상태 공간 분석
이 게임은 **이전의 선택이 이후의 결과에 영향을 미치기 때문에 이전의 선택을 고려**해야한다.  

- 보너스 조건:  
  - 63,000점 이상을 얻은 경우 **보너스 점수 35,000점** 추가
  - 점수는 `0~63` 범위로 저장 (63점 초과는 63으로 처리)
  - 각각의 점수는 /1000을 해서 '0~63' 범위로 저장한다.

- 선택 가능한 카테고리 수:  
  - 총 12개의 카테고리로 이루어져 있으므로 선택 가능한 경우의 수는 2^12

- 라운드에서 넘겨온 주사위 5개의 조합:  
![Image](https://github.com/user-attachments/assets/cad77fda-e2dd-4e68-8a7c-20abc95914e7)

- 가능한 상태 수:  
  \[
  2^{12} \times 64 \times 252 \approx 66,060,288
  \]
---

## ✂️ 상태 줄이기 (가지치기)
단순히 계산하면 상태가 너무 많지만, **불필요한 상태는 제거**할 수 있다.

예시:
- 상단 카테고리 `One`, `Two`가 이미 사용됐다면 63점 이상은 불가능 → 해당 상태 제거
- 실제로는 전체 4096개의 경우 중 **약 2794개 상태**만 도달 가능 → 약 **31% 절감**
- 보너스 점수 35,000점 이상인 상태도 추가 점수 없음 → 제외 가능

> 즉, 불필요한 상태를 걸러내면 훨씬 적은 상태만 계산하면 된다.

---

## 📊 기대값 계산 방법
각 상태의 기대값을 구하는 과정:
1. 10개의 주사위 조합에서 선택한 5개와 남은 5개를 고려
2. 선택된 카테고리에 점수를 기록
3. 각 경우의 기대값을 합산 후 평균
4. 그중에서 **가장 높은 기대값**을 선택

---

## 🕒 실행 결과
- 모든 상태의 기대값을 구하는 데 **약 1시간 반** 소요됨
- 가지치기 및 효율화 덕분에, 단순 계산 대비 훨씬 빠르게 결과를 얻을 수 있었음

---

## ✅ 결론
- 상태 수를 줄이는 것이 핵심
- 단순 완전탐색은 불가능 → **효율적인 가지치기와 기대값 계산 전략** 필요
- 실제 구현을 통해 문제를 해결할 수 있었음

